Perfeito ğŸš€ Vou montar um mini README com os endpoints do seu servidor SofiaAI Ultra Fast. Assim vocÃª ou qualquer outra pessoa que mexer no projeto nÃ£o se perde mais.

ğŸ“– SofiaAI Ultra Fast API

Servidor em Node.js para interface com Ollama via REST e WebSocket.
Focado em mÃ¡xima performance, cache de modelos e baixa latÃªncia.

ğŸŒ Endpoints HTTP
ğŸ” Status

GET /api/status
Retorna informaÃ§Ãµes gerais do servidor.

Exemplo de resposta:

{
  "status": "ğŸš€ ULTRA_FAST",
  "totalModels": 2,
  "activeModels": 1,
  "cache": { ... },
  "connections": 3,
  "config": { ... },
  "performance": {
    "mode": "MAXIMUM_PERFORMANCE",
    "keepAlive": "60m",
    "batchSize": 64
  }
}

ğŸ¤– Modelos disponÃ­veis

GET /api/models
Lista os modelos carregados no Ollama.

Resposta:

{
  "models": ["sofiaai_phi:latest", "llama3.2:3b"],
  "cached": true
}

âš¡ Modelos ativos

GET /api/status
JÃ¡ inclui os modelos ativos (activeModels).

ğŸ”¥ PrÃ©-carregar modelo

POST /api/preload/:model
Carrega um modelo na memÃ³ria antes do uso.

Exemplo:

POST /api/preload/sofiaai_phi:latest


Resposta:

{
  "success": true,
  "model": "sofiaai_phi:latest",
  "duration": 850,
  "message": "Modelo sofiaai_phi:latest carregado em 850ms"
}

ğŸ“ˆ Performance

GET /api/performance
Mostra otimizaÃ§Ãµes ativas e dicas de performance.

ğŸ”Œ WebSocket

Conectar em:

ws://<SEU_IP>:4000/ws

Mensagem de entrada
{
  "prompt": "OlÃ¡, tudo bem?",
  "modelo": "sofiaai_phi:latest"
}

Mensagens recebidas

ConexÃ£o inicial

{ "type": "connected", "mode": "ULTRA_FAST", "config": { ... } }


InÃ­cio da geraÃ§Ã£o

{ "type": "start", "modelo": "sofiaai_phi:latest", "loadTime": 200 }


Token gerado

{ "type": "token", "text": "OlÃ¡" }


FinalizaÃ§Ã£o

{
  "type": "done",
  "stats": {
    "tokens": 20,
    "totalTime": 1200,
    "tokensPerSecond": 16.6,
    "ttft": 300
  }
}


Erro

{ "type": "error", "message": "Falha ao carregar modelo" }

âš™ï¸ VariÃ¡veis de ambiente recomendadas
export OLLAMA_NUM_PARALLEL=4
export OLLAMA_MAX_LOADED_MODELS=2
export OLLAMA_FLASH_ATTENTION=1
